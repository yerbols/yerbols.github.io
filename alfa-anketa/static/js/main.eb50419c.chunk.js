(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"m",function(){return a}),n.d(e,"p",function(){return o}),n.d(e,"M",function(){return i}),n.d(e,"C",function(){return c}),n.d(e,"A",function(){return u}),n.d(e,"R",function(){return s}),n.d(e,"D",function(){return l}),n.d(e,"E",function(){return f}),n.d(e,"x",function(){return d}),n.d(e,"h",function(){return m}),n.d(e,"y",function(){return g}),n.d(e,"Q",function(){return p}),n.d(e,"N",function(){return h}),n.d(e,"S",function(){return E}),n.d(e,"t",function(){return S}),n.d(e,"e",function(){return v}),n.d(e,"j",function(){return O}),n.d(e,"b",function(){return T}),n.d(e,"q",function(){return b}),n.d(e,"d",function(){return A}),n.d(e,"w",function(){return y}),n.d(e,"c",function(){return D}),n.d(e,"v",function(){return N}),n.d(e,"B",function(){return I}),n.d(e,"z",function(){return j}),n.d(e,"g",function(){return R}),n.d(e,"n",function(){return w}),n.d(e,"a",function(){return _}),n.d(e,"l",function(){return C}),n.d(e,"u",function(){return U}),n.d(e,"k",function(){return k}),n.d(e,"f",function(){return P}),n.d(e,"I",function(){return x}),n.d(e,"J",function(){return L}),n.d(e,"L",function(){return q}),n.d(e,"K",function(){return M}),n.d(e,"F",function(){return F}),n.d(e,"H",function(){return J}),n.d(e,"G",function(){return z}),n.d(e,"o",function(){return H}),n.d(e,"r",function(){return Q}),n.d(e,"s",function(){return Y}),n.d(e,"O",function(){return G}),n.d(e,"P",function(){return V});var r="CLEAR",a="ERROR",o="LOADING",i="SUCCESS",c="SET_REQUEST_STATUS",u="SET_LAST_REQUEST",s="USER/",l="SET_USER",f="SET_USERNAME",d="REMOVE_USER",m="AUTH/",g="SET_AUTH",p="UNSET_AUTH",h="TOKEN_EXPIRED",E="USER_LOGOUT",S="PARTNERS/",v="ADD_PARTNER",O="CLIENTS/",T="ADD_CLIENT",b="NOTICES/",A="ADD_NOTIFICATION",y="REMOVE_NOTIFICATION",D="ADD_CONFIRM",N="REMOVE_CONFIRM",I="SET_PARAMS",j="SET_FILTERS",R="APPLICATIONS/",w="FETCH_APPLICATIONS",_="ADD_APPLICATION",C="EDIT_APPLICATION",U="REMOVE_APPLICATION",k="DELAY HAVE NOT PASSED",P="REQUEST ALREADY FETCHED",x="STATUS_DRAFT",L="STATUS_PENDING",q="STATUS_WRONG",M="STATUS_SUCCESS",F="SORT_CREATED_AT",J="SORT_EDITED_AT",z="SORT_DESC",H="FILTER_DAY_TODAY",Q="ORDER_STATUS_CONTINUE",Y="ORDER_STATUS_ERROR_1",G="TYPE_DANGER",V="TYPE_DEFAULT"},10:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return o});var r="Bad credentials",a="Server Error",o="no data"},11:function(t,e,n){"use strict";var r=n(17),a=n(73),o=n(74),i=n(75),c=n(0),u=c.t,s={request:c.i,list:[]};var l=c.j,f={request:c.i,list:[]};var d=n(15),m=n(20),g=n(7);c.K,c.J;var p=c.g,h={request:c.i,lastRequest:null,params:{total:0,limit:10,offset:0,sortBy:c.F,sortOrder:c.G},filters:{search:"",day:"",status:[]},sortBy:null,list:[]};var E=c.h,S={authenticated:!!localStorage.getItem("user")};var v=n(50),O=Object(r.combineReducers)({routing:a.routerReducer,notices:d.a,partners:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;return 0!==n.indexOf(u)?t:((n=n.replace(u,""))===c.C&&(t.request=r),n===c.e&&t.list.push(r),t)},clients:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;return 0!==n.indexOf(l)?t:((n=n.replace(l,""))===c.C&&(t.request=r),n===c.b&&t.list.push(r),t)},applications:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;if(0!==n.indexOf(p))return t;if((n=n.replace(p,""))===c.A&&(t.lastRequest=new Date),n===c.C&&(t.request=r),n===c.n&&(t.list=r),n===c.B&&(t.params=Object(g.a)({},t.params,r)),n===c.z&&(t.filters=Object(g.a)({},t.filters,r)),n===c.a&&(t.list=[r].concat(Object(m.a)(t.list))),n===c.l){var a=t.list.findIndex(function(t){return t.id===r.id});t.list[a]=r}if(n===c.u){var o=t.list.findIndex(function(t){return t.id===r}),i=t.list.slice();i.splice(o,1),t.list=i.slice()}return Object.assign({},t)},user:v.a,auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0,n=e.type;return e.payload,0!==n.indexOf(E)?t:((n=n.replace(E,""))===c.y&&(t.authenticated=!0),n===c.Q&&(t.authenticated=!1),Object.assign({},t))}});e.a=Object(r.createStore)(O,Object(o.composeWithDevTools)(Object(r.applyMiddleware)(i.a)))},125:function(t,e,n){},127:function(t,e,n){},15:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"c",function(){return s}),n.d(e,"e",function(){return l}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return d});var r=n(7),a=n(20),o=n(0),i=o.q,c={notifications:[],confirms:[]};function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments.length>1?arguments[1]:void 0,n=e.type,u=e.payload;if(0!==n.indexOf(i))return t;if((n=n.replace(i,""))===o.d){var s=Object.assign({},t);return u.id=(new Date).getTime().toString()+s.notifications.length,s.notifications=[].concat(Object(a.a)(s.notifications),[u]),s}if(n===o.w){var l=Object.assign([],t.notifications),f=l.findIndex(function(t){return t.id===u});return-1!==f&&l.splice(f,1),Object(r.a)({},t,{notifications:l})}if(n===o.c){var d=Object.assign({},t);return u.id=(new Date).getTime().toString()+d.confirms.length,u.onCancelClick=function(){u.rejection(u.id)},u.onConfirmClick=function(){u.resolving(u.id)},d.confirms=[].concat(Object(a.a)(d.confirms),[u]),d}if(n===o.v){var m=Object.assign([],t.confirms),g=m.findIndex(function(t){return t.id===u});return-1!==g&&m.splice(g,1),Object(r.a)({},t,{confirms:m})}return Object(r.a)({},t)}var s=function(t){return function(e){e({type:i+o.d,payload:t})}},l=function(t){return function(e){e({type:i+o.w,payload:t})}},f=function(t){return function(e){e({type:i+o.c,payload:t})}},d=function(t){return function(e){e({type:i+o.v,payload:t})}}},18:function(t,e,n){"use strict";var r=n(22),a=n.n(r),o=n(21),i=n(0),c=!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")),u=c?c.token_type+" "+c.access_token:"",s=localStorage.getItem("last-activity")?new Date(localStorage.getItem("last-activity")):new Date(0),l=a.a.create({baseURL:"/api",headers:{"Content-Type":"application/json",Authorization:u}});l.interceptors.response.use(function(t){return t},function(t){if(t&&t.response&&401===t.response.status)if(console.log(u),console.log("token expired"),new Date-s.getTime()>18e5)o.a.logout(i.N);else if(c){var e=window.atob(c.authdata).split(":");o.a.login(e[0],e[1]).then(function(t){return console.log(t)})}return Promise.reject(t)}),e.a=l},183:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),o=n(23),i=n.n(o),c=n(866),u=n(14),s=n(11),l=(n(123),n(125),n(127),n(129),n(868)),f=n(372),d=n(867),m=n(69);var g=Object(u.b)(function(t){return{auth:t.auth}})(function(t){var e=t.component,n=t.auth,r=Object(m.a)(t,["component","auth"]);return a.a.createElement(f.a,Object.assign({},r,{render:function(t){return n.authenticated?a.a.createElement(e,t):a.a.createElement(d.a,{to:{pathname:"/login",state:{from:t.location}}})}}))}),p=n(21),h=n(32),E=n(0),S=n(34),v=n(35),O=n(37),T=n(36),b=n(38),A=n(76),y=n.n(A),D=n(15),N=function(t){function e(){return Object(S.a)(this,e),Object(O.a)(this,Object(T.a)(e).apply(this,arguments))}return Object(b.a)(e,t),Object(v.a)(e,[{key:"closeNotification",value:function(t){this.props.removeNotification(t)}},{key:"render",value:function(){var t=this,e=this.props.notifications,n={left:0,right:0};return a.a.createElement("div",{className:"global-notifications p-fixed color-white",style:{top:0,left:0,zIndex:1e4}},e.map(function(r,o){var i=r.id,c=r.message,u=void 0===c?"":c,s=r.options,l=void 0===s?{}:s,f=l.stickTo?l.stickTo:"right";l.autoCloseDelay=l.autoCloseDelay?l.autoCloseDelay:5e3;var d=a.a.createElement(y.a,Object.assign({ref:function(t){return e[o]?e[o].ref=t:""},key:i,visible:!0,offset:n[f]+10,stickTo:f,onCloseTimeout:function(){t.closeNotification(i)},onCloserClick:function(){t.closeNotification(i)}},l),u);return n[f]+=e[o].ref?e[o].ref.root.offsetHeight+10:0,d}))}}]),e}(a.a.Component),I=Object(u.b)(function(t){return{notifications:t.notices.notifications}},function(t){return{removeNotification:function(e){t(Object(D.e)(e))},pushNotification:function(e){return t(Object(D.c)(e))}}})(N),j=n(77),R=n.n(j);var w=Object(u.b)(function(t){return{confirms:t.notices.confirms}})(function(t){var e=t.confirms,n=void 0===e?[]:e;return a.a.createElement("div",{className:"global-confirms"},n.map(function(t){return a.a.createElement(R.a,Object.assign({key:t.id},t))}))});var _=function(){return a.a.createElement("div",{className:"global-notices"},a.a.createElement(w,null),a.a.createElement(I,null))},C=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(9),n.e(2)]).then(n.bind(null,864))}),U=Object(r.lazy)(function(){return n.e(3).then(n.bind(null,862))}),k=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(7),n.e(4)]).then(n.bind(null,865))});var P=function(){return a.a.createElement("div",{className:"app"},a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(l.a,null,a.a.createElement(f.a,{path:"/login",exact:!0,component:Object(h.a)(C)}),a.a.createElement(f.a,{path:"/logout",render:function(){return p.a.logout(E.S),a.a.createElement(d.a,{to:"/dashboard"})}}),a.a.createElement(g,{path:"/dashboard",component:k}),a.a.createElement(f.a,{path:"/",exact:!0,render:function(){return a.a.createElement(d.a,{to:"/dashboard"})}}),a.a.createElement(f.a,{path:"/404",exact:!0,component:Object(h.a)(U)}),a.a.createElement(d.a,{from:"*",to:"/404"}))),a.a.createElement(_,null))};i.a.render(a.a.createElement(u.a,{store:s.a},a.a.createElement(c.a,{basename:"/alfa-anketa"},a.a.createElement(P,null))),document.getElementById("root"))},21:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(31),a=n.n(r),o=n(56),i=n(18),c=n(10),u=n(11),s=n(0),l=n(15),f=n(70),d={login:function(t,e){return m.apply(this,arguments)},logout:function(t){console.log("logout"),localStorage.removeItem("user"),delete i.a.defaults.headers.common.Authorization,delete i.a.defaults.headers.Authorization,u.a.dispatch({type:s.R+s.x}),u.a.dispatch({type:s.h+s.Q}),t===s.N&&u.a.dispatch(Object(l.c)({message:"\u0412\u0440\u0435\u043c\u044f \u0441\u0435\u0441\u0441\u0438\u0438 \u0438\u0441\u0442\u0435\u043a\u043b\u043e",options:{status:"error",title:"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"}}));t===s.S&&u.a.dispatch(Object(l.c)({message:"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e",options:{status:"ok",title:"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"}}))}};function m(){return(m=Object(o.a)(a.a.mark(function t(e,n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.checkPassword(e,n).catch(p).then(g).then(function(t){return t&&(t.authdata=window.btoa(e+":"+n),localStorage.setItem("user",JSON.stringify(t)),i.a.defaults.headers.Authorization=t.token_type+" "+t.access_token,u.a.dispatch({type:s.h+s.y}),u.a.dispatch({type:s.R+s.E,payload:e})),t});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function g(t){return t.data?t.data:Promise.reject({data:c.b})}function p(t){var e=t.response,n=e.status,r=e.data,a={};return 400===n&&r.error_description===c.a&&(a.badCredentials={status:n,data:c.a}),Promise.reject(a)}},32:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(1),a=n.n(r);function o(t){return function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(t,Object.assign({key:"Component"},e)))}}},50:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u});var r=n(0),a=n(18),o=r.R,i={request:r.i,lastRequest:null,user:{},username:localStorage.getItem("user")?window.atob(JSON.parse(localStorage.getItem("user")).authdata).split(":")[0]:""};function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;return 0!==n.indexOf(o)?t:((n=n.replace(o,""))===r.C&&(t.request=a,t.lastRequest=new Date),n===r.D&&(t.user=Object.assign({},a)),n===r.E&&(t.username=a),n===r.x&&(t=i),Object.assign({},t))}var u=function(t,e){var n=e.light,i=void 0!==n&&n,c=e.forced,u=void 0!==c&&c;return function(e,n){return new Promise(function(c,s){var l=n().user,f=l.lastRequest,d=l.request;if(i&&!u&&f&&d===r.M)throw new Error(r.f);if(f&&!u&&(new Date).getTime()-f.getTime()<3e4)throw new Error(r.k);e({type:o+r.C,payload:r.p}),a.a.get("profile?username="+t).then(function(t){var n=t.data;e({type:o+r.D,payload:n}),e({type:o+r.C,payload:r.M})}).catch(function(t){console.log(t),e({type:o+r.C,payload:r.m}),s(t)})})}}},70:function(t,e,n){"use strict";var r=n(7),a=n(22),o=n.n(a),i=n(10);n.d(e,"a",function(){return u});var c={localStorageNaming:"anketa-mock-user",getUsers:function(){var t=[];try{(t=JSON.parse(localStorage.getItem(this.localStorageNaming)))||(t=[{id:"77021113438",username:"77021113438",firstName:"\u0415\u0440\u0431\u043e\u043b",lastName:"\u0421\u044b\u0437\u0434\u044b\u043a"}])}catch(e){return localStorage.removeItem(this.localStorageNaming),this.getUsers()}return localStorage.setItem(this.localStorageNaming,JSON.stringify(t)),t},getUser:function(t){return this.getUsers().find(function(e){return e.username===t})}},u={localStorageNaming:"anketa-mock-auth",getAuthDatas:function(){var t=[];try{(t=JSON.parse(localStorage.getItem(this.localStorageNaming)))||(t=[])}catch(e){return localStorage.removeItem(this.localStorageNaming),this.getAuthDatas()}return localStorage.setItem(this.localStorageNaming,JSON.stringify(t)),t=t.map(function(t){return t.created=new Date(t.created),t})},getAuthData:function(t){return this.getAuthDatas().find(function(e){return e.username===t})},setAuthData:function(t,e){var n=this.getAuthDatas(),r={username:t,password:e,created:new Date,browser:window.navigator.userAgent.replace(/\D+/g,"")},a=n.findIndex(function(e){return e.username===t});-1!==a?n[a]=r:n.push(r),localStorage.setItem(this.localStorageNaming,JSON.stringify(n))},sendPassword:function(t){var e=this;return new Promise(function(n,r){if(c.getUser(t)){var a=(1e4+parseInt(1e4*Math.random())).toString().substr(1,4),u=encodeURI("username: ".concat(t,"\ncode: ").concat(a));e.setAuthData(t,a),n(o.a.get("https://api.telegram.org/bot867600285:AAFZDsmQYhSK5nVzgTqj-Uj6HfhaW-Ul854/sendMessage?chat_id=254410503&text="+u))}else setTimeout(function(){r(new Error(i.a))},700)})},resendPassword:function(t){var e=this;return new Promise(function(n,r){var a=e.getAuthData(t);if(a){var c=a.password,u=encodeURI("username: ".concat(t,"\ncode: ").concat(c));e.setAuthData(t,c),n(o.a.get("https://api.telegram.org/bot867600285:AAFZDsmQYhSK5nVzgTqj-Uj6HfhaW-Ul854/sendMessage?chat_id=254410503&text="+u))}else setTimeout(function(){r(new Error(i.a))},700)})},checkPassword:function(t,e){var n=this;return new Promise(function(a,o){setTimeout(function(){var u=n.getAuthData(t);if(u&&u.password===e){var s=c.getUser(t);s?a({status:200,data:Object(r.a)({},s,{token_type:"bearer",access_token:["JWT_TOKEN",s.username,new Date(new Date+18e5).toISOString()].join(":")})}):o(new Error(i.a))}else o(new Error(i.a))},800)})}}},92:function(t,e,n){t.exports=n(183)}},[[92,10,8]]]);
//# sourceMappingURL=main.eb50419c.chunk.js.map